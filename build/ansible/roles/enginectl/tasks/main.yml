---
# tasks file for enginectl
#- name: Update configuration for enginectl
#  template:
#    src: "{{sourcedir}}/enginectl/configuration.lua"
#    dest: "{{destinationdir}}/enginectl/configuration.lua"
#    owner: root
#    group: root
#    mode: 0754

- name: Gather enginectl lua file
  find:
    paths: "{{destinationdir}}/enginectl"
    patterns: "*.lua"
    file_type: file
  register: fslua

- name: Update template for enginectl
  template:
    src: "{{sourcedir}}/enginectl/{{ item.path | basename }}"
    dest: "{{destinationdir}}/enginectl/{{ item.path | basename }}"
    owner: root
    group: root
    mode: '0754'
    #variable_start_string: '{{'
    #variable_end_string: '}}'
  with_items: "{{ fslua.files }}"
